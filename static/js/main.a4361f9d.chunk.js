(this.webpackJsonpvideochat=this.webpackJsonpvideochat||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},51:function(e,t){},53:function(e,t){},62:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(27),o=c.n(a),i=(c(34),c(35),c(36),c(37),c(0));var r=function(e){let{sender:t,content:c}=e;return Object(i.jsx)("div",{style:{alignSelf:"1"===t?"flex-end":"flex-start"},className:"message",children:c})};var l=function(e){let{messageContent:t,setmessageContent:c,sendMessage:n,messages:a}=e;return Object(s.useEffect)((()=>{var e=document.querySelector(".chat_messages");e.scrollTop=e.scrollHeight,e.animate({scrollTop:e.scrollHeight})})),Object(i.jsxs)("div",{className:"chat",children:[Object(i.jsx)("div",{className:"chat_messages",children:a.map(((e,t)=>Object(i.jsx)(r,{sender:e.type,content:e.content},t)))}),Object(i.jsxs)("div",{className:"chat_footer",children:[Object(i.jsx)("input",{value:t,onInput:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&n(e)},type:"text",name:"chat"}),Object(i.jsx)("i",{className:"chat_send fas fa-arrow-right",onClick:e=>n(e)})]})]})},m=(c(39),c.p+"static/media/loader2.ee4b8d62.mp4");function d(e){let{name:t,videoRef:c,type:s}=e;return Object(i.jsxs)("div",{className:"videocard",children:[Object(i.jsx)("div",{className:"videocard_name",children:t}),Object(i.jsx)("video",{loop:!0,src:m,ref:c,autoPlay:!0,id:s})]})}c(40);var u=c(29),j=c(18),g=c.n(j);const h=u.a.connect("https://videocall-backend-vpv5.onrender.com");function b(e){let{myName:t,setroute:c}=e;const[n,a]=Object(s.useState)(),[o,r]=Object(s.useState)(""),[m,u]=Object(s.useState)(""),[j,b]=Object(s.useState)(),[O,v]=Object(s.useState)(""),[p,f]=Object(s.useState)(""),[x,y]=Object(s.useState)(""),[N,_]=Object(s.useState)([]),S=Object(s.useRef)(),w=Object(s.useRef)(),C=Object(s.useRef)();Object(s.useEffect)((()=>{r(h.id),h.on("returOpponentId",(e=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((t=>{a(t),S.current.srcObject=t,e&&q(e.opponent,e.myId,t)}))})),h.emit("getOpponetId",h.id),h.on("callUser",(e=>{u(e.from),v(e.name),b(e.signal),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((t=>{L(e.from,e.signal,t)}))})),h.on("callEnded",(()=>{window.location.reload()}))}),[]),Object(s.useEffect)((()=>{h.on("messageReceived",(e=>{_([...N,{type:"2",content:e}])}))}),[N]);const k=e=>{e.target!==document.querySelector(".videocard_icon")&&("1"===e.target.id?document.querySelector(".two").classList.contains("home_cam2")&&(document.querySelector(".one").classList.toggle("home_cam2"),document.querySelector(".one").classList.toggle("home_cam1"),document.querySelector(".two").classList.toggle("home_cam1"),document.querySelector(".two").classList.toggle("home_cam2")):document.querySelector(".one").classList.contains("home_cam2")&&(document.querySelector(".one").classList.toggle("home_cam2"),document.querySelector(".one").classList.toggle("home_cam1"),document.querySelector(".two").classList.toggle("home_cam1"),document.querySelector(".two").classList.toggle("home_cam2")))},q=(e,c,s)=>{const n=new g.a({initiator:!0,trickle:!1,stream:s});n.on("signal",(s=>{h.emit("callUser",{userToCall:e,signalData:s,from:c,name:t})})),n.on("stream",(e=>{w.current.srcObject=e})),h.on("callAccepted",(e=>{n.signal(e.signal),v(e.name),u(e.id)})),C.current=n},L=(e,c,s)=>{const n=new g.a({initiator:!1,trickle:!1,stream:s});n.on("signal",(c=>{h.emit("answerCall",{signal:c,to:e,name:t})})),n.on("stream",(e=>{w.current.srcObject=e})),n.signal(c),C.current=n};return Object(i.jsxs)("div",{className:"home",children:[Object(i.jsx)("i",{onClick:()=>c("signup"),className:"home_back fas fa-arrow-left"}),Object(i.jsxs)("div",{className:"home_container",children:[Object(i.jsx)("button",{onClick:()=>(h.emit("endCall",{opponent:m}),void window.location.reload()),className:"home_endButton",children:"End"}),Object(i.jsxs)("div",{className:"home_camContainer",children:[Object(i.jsx)("div",{onClick:e=>k(e),className:"two home_cam2",children:Object(i.jsx)(d,{name:O,videoRef:w,type:"2"})}),Object(i.jsx)("div",{onClick:e=>k(e),className:"one home_cam1",children:Object(i.jsx)(d,{name:t,videoRef:S,type:"1"})})]}),Object(i.jsx)("div",{className:"home_chat",children:Object(i.jsx)(l,{messageContent:x,setmessageContent:y,sendMessage:e=>{try{""!==x&&(h.emit("sendMessage",{to:m,message:x}),_([...N,{type:"1",content:x}]),y(""))}catch(t){console.log(t.message)}},messages:N})})]})]})}c(62);var O=c.p+"static/media/bird.79bc219c.svg";function v(e){let{setmyName:t,setroute:c}=e;return Object(i.jsxs)("div",{className:"signup",children:[Object(i.jsx)("img",{src:O,alt:""}),Object(i.jsxs)("div",{className:"signup_form",children:[Object(i.jsx)("div",{className:"signup_title",children:"Enter Here !"}),Object(i.jsxs)("div",{className:"signup_input",children:[Object(i.jsx)("span",{children:"Nickname"}),Object(i.jsx)("span",{children:Object(i.jsx)("input",{type:"text",name:"name",onInput:e=>t(e.target.value)})})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{onClick:()=>c("home"),children:"Enter"})})]})]})}var p=function(){const[e,t]=Object(s.useState)("signup"),[c,n]=Object(s.useState)("Anonymous");return Object(i.jsx)("div",{className:"App",children:(e=>{switch(e){case"home":return Object(i.jsx)(b,{myName:c,setroute:t});case"signup":return Object(i.jsx)(v,{setmyName:n,setroute:t});default:return Object(i.jsx)("h2",{style:{textAlign:"center"},children:"Error 404 : Page Not Found"})}})(e)})};var f=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,64)).then((t=>{let{getCLS:c,getFID:s,getFCP:n,getLCP:a,getTTFB:o}=t;c(e),s(e),n(e),a(e),o(e)}))};o.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(p,{})}),document.getElementById("root")),f()}},[[63,1,2]]]);
//# sourceMappingURL=main.a4361f9d.chunk.js.map