{"version":3,"sources":["components/Chat/Message.js","components/Chat/Chat.js","assets/loader2.mp4","components/VideoCard/Videocard.js","components/Home/Home.js","assets/bird.svg","components/Signup/Signup.js","App.js","reportWebVitals.js","index.js"],"names":["Message","_ref","sender","content","_jsx","style","alignSelf","className","children","Chat","messageContent","setmessageContent","sendMessage","messages","useEffect","scroll","document","querySelector","scrollTop","scrollHeight","animate","_jsxs","map","mess","key","type","value","onInput","e","target","onKeyPress","name","onClick","Videocard","videoRef","loop","src","sample_video","ref","autoPlay","id","socket","io","connect","Home","myName","setroute","stream","setstream","useState","myId","setmyId","caller","setCaller","callerSignal","setCallerSignal","opponentName","setopponentName","opponentId","setopponentId","setmessages","myVideo","useRef","opponentVideo","connectionRef","on","navigator","mediaDevices","getUserMedia","video","audio","then","current","srcObject","callUser","opponent","emit","data","from","signal","answerCall","window","location","reload","messageReceived","toggleCam","classList","contains","toggle","opp","my","peer","Peer","initiator","trickle","userToCall","signalData","gotcaller","gotsignal","to","message","error","console","log","Signup","setmyName","bird","alt","App","route","textAlign","routing","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a4361f9d.chunk.js","sourcesContent":["import React from 'react'\nimport './Message.css'\n\nfunction Message({sender,content}) {\n    return (\n        <div style={{alignSelf : sender==='1'?'flex-end':'flex-start'}} className='message'>\n            {content} \n        </div>\n    )\n}\n\nexport default Message\n","import React, { useEffect } from 'react'\nimport './Chat.css'\nimport Message from './Message'\n\nfunction Chat({messageContent,setmessageContent,sendMessage,messages}) {\n    useEffect(() => {\n        var scroll = document.querySelector('.chat_messages');\n        scroll.scrollTop = scroll.scrollHeight;\n        scroll.animate({scrollTop: scroll.scrollHeight});\n    })\n    return (\n        <div className='chat'>\n            <div className='chat_messages'>\n            {/* 1 means self and 2 means opponent */}\n                {/* <Message sender={'1'}/> */}\n                {\n                    messages.map((mess,key)=>{\n                        return <Message key={key} sender={mess.type} content={mess.content}/>\n                    })\n                }\n            </div>\n            <div className='chat_footer'>\n                <input value={messageContent} onInput={(e)=>setmessageContent(e.target.value)} onKeyPress={(e)=>{if(e.key === 'Enter'){sendMessage(e)}}} type=\"text\" name='chat' />\n                <i className=\"chat_send fas fa-arrow-right\" \n                    onClick={(e)=>sendMessage(e)}></i>\n            </div>\n        </div>\n    )\n}\n\nexport default Chat\n","export default __webpack_public_path__ + \"static/media/loader2.ee4b8d62.mp4\";","import React, { useState } from 'react'\nimport './Videocard.css'\nimport sample_video from '../../assets/loader2.mp4'\n\nexport default function Videocard({name,videoRef,type}) {\n\n    // console.log(videoRef);\n    return (\n        <div className='videocard'>\n            <div className='videocard_name'>{name}</div>\n            <video loop src={sample_video} ref={videoRef} autoPlay id={type}></video>\n        </div>\n    )\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport Chat from '../Chat/Chat'\nimport Videocard from '../VideoCard/Videocard'\nimport './Home.css'\n\nimport io from \"socket.io-client\"\nimport Peer from \"simple-peer\"\nconst socket = io.connect('https://videocall-backend-vpv5.onrender.com')\n\nexport default function Home({myName,setroute}) {\n    const [stream, setstream] = useState()\n    const [myId, setmyId] = useState('')\n\tconst [ caller, setCaller ] = useState(\"\")\n\tconst [ callerSignal, setCallerSignal ] = useState()\n\tconst [opponentName, setopponentName] = useState('')\n\tconst [opponentId, setopponentId] = useState('')\n\tconst [messageContent, setmessageContent] = useState('')\n\tconst [messages, setmessages] = useState([])\n\n    const myVideo = useRef()\n\tconst opponentVideo = useRef()\n\tconst connectionRef= useRef()\n\n    // var socket;\n\n    useEffect(() => {\n\t\t\n\t\tsetmyId(socket.id)\n\t\tsocket.on(\"returOpponentId\", (id) => {\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: true, audio: true }).then((stream) => {\n\t\t\t\tsetstream(stream)\n\t\t\t\tmyVideo.current.srcObject = stream\n\t\t\t\tif(id){\n\t\t\t\t\tcallUser(id.opponent,id.myId,stream);\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\n\t\tsocket.emit('getOpponetId',socket.id)\n\t\tsocket.on(\"callUser\", (data) => {\n\t\t\t// setReceivingCall(true)\n\t\t\tsetCaller(data.from)\n\t\t\tsetopponentName(data.name)\n\t\t\tsetCallerSignal(data.signal)\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: true, audio: true }).then((stream) => {\n\t\t\t\tanswerCall(data.from,data.signal,stream);\n\t\t\t})\n\t\t})\n\t\tsocket.on('callEnded',()=>{\n\t\t\twindow.location.reload()\n\t\t})\n\n\t}, [])\n\tuseEffect(() => {\n\t\tsocket.on('messageReceived',(messageReceived)=>{\n\t\t\tsetmessages([...messages,{type:'2',content:messageReceived}])\n\t\t})\n\t}, [messages])\n\n    const toggleCam = (e) => {\n        if(e.target === document.querySelector('.videocard_icon')){\n            return;\n        }\n\n        if(e.target.id === '1'){\n            if(document.querySelector('.two').classList.contains('home_cam2')){\n                document.querySelector('.one').classList.toggle(\"home_cam2\");\n                document.querySelector('.one').classList.toggle(\"home_cam1\");\n                document.querySelector('.two').classList.toggle(\"home_cam1\");\n                document.querySelector('.two').classList.toggle(\"home_cam2\");\n            }\n        }else{\n            if(document.querySelector('.one').classList.contains('home_cam2')){\n                document.querySelector('.one').classList.toggle(\"home_cam2\");\n                document.querySelector('.one').classList.toggle(\"home_cam1\");\n                document.querySelector('.two').classList.toggle(\"home_cam1\");\n                document.querySelector('.two').classList.toggle(\"home_cam2\");\n            }\n        }\n    }\n\n\n\tconst callUser = (opp,my,stream) => {\n\t\tconst peer = new Peer({\n\t\t\tinitiator: true,\n\t\t\ttrickle: false,\n\t\t\tstream: stream\n\t\t})\n\t\tpeer.on(\"signal\", (data) => {\n\t\t\tsocket.emit(\"callUser\", {\n\t\t\t\tuserToCall: opp,\n\t\t\t\tsignalData: data,\n\t\t\t\tfrom: my,\n\t\t\t\tname: myName\n\t\t\t})\n\t\t})\n\t\tpeer.on(\"stream\", (stream) => {\n\t\t\topponentVideo.current.srcObject = stream\n\t\t\t\n\t\t})\n\t\tsocket.on(\"callAccepted\", (data) => {\n\t\t\t// setCallAccepted(true)\n\t\t\tpeer.signal(data.signal)\n\t\t\tsetopponentName(data.name)\n\t\t\tsetCaller(data.id)\n\t\t})\n\n\t\tconnectionRef.current = peer\n\t}\n\n\tconst answerCall =(gotcaller,gotsignal,stream) =>  {\n\t\t// setCallAccepted(true)\n\t\tconst peer = new Peer({\n\t\t\tinitiator: false,\n\t\t\ttrickle: false,\n\t\t\tstream: stream\n\t\t})\n\t\tpeer.on(\"signal\", (data) => {\n\t\t\tsocket.emit(\"answerCall\", { signal: data, to: gotcaller, name: myName })\n\t\t})\n\t\tpeer.on(\"stream\", (stream) => {\n\t\t\topponentVideo.current.srcObject = stream\n\t\t})\n\t\tpeer.signal(gotsignal)\n\t\tconnectionRef.current = peer\n\t}\n\tconst leaveCall = () => {\n\t\t// setCallEnded(true)\n\t\t// connectionRef.current.destroy()\n\t\tsocket.emit(\"endCall\", {\n\t\t\topponent: caller,\n\t\t})\n\t\twindow.location.reload()\n\t}\n\n\tconst sendMessage = (e) => {\n\t\ttry {\n\t\t\tif(messageContent!==''){\n\t\t\t\tsocket.emit(\"sendMessage\", {\n\t\t\t\t\tto: caller,\n\t\t\t\t\tmessage: messageContent\n\t\t\t\t})\n\t\t\t\tsetmessages([...messages,{type:'1',content:messageContent}])\n\t\t\t\tsetmessageContent('')\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error.message);\t\n\t\t}\n\t}\n\n    return (\n        <div className='home'>\n            <i onClick={()=>setroute('signup')} className=\"home_back fas fa-arrow-left\"></i>\n            <div className='home_container'>\n\t\t\t\t<button onClick={()=>leaveCall()} className='home_endButton'>End</button>\n\t\t{/* <input type=\"text\" onInput={(e)=>setopponentId(e.target.value)} />\n\t\t<button onClick={()=>callUser(opponentId)}> call</button>\n\t\t<button onClick={()=>answerCall()}>Answer</button>\n\t\t<button onClick={()=>leaveCall()}>End</button> */}\n                <div className='home_camContainer'>\n                    {/* opponent video type 2 */}\n                    <div onClick={(e)=>toggleCam(e)} className='two home_cam2'><Videocard name={opponentName} videoRef={opponentVideo} type={'2'}/></div>\n                    {/* my video type 1 */}\n                    <div onClick={(e)=>toggleCam(e)} className='one home_cam1'><Videocard name={myName} videoRef={myVideo} type={'1'}/></div>\n                </div>\n                <div className='home_chat'><Chat messageContent={messageContent} setmessageContent={setmessageContent} sendMessage={sendMessage} messages={messages}/></div>\n            </div>\n        </div>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/bird.79bc219c.svg\";","import React from 'react'\nimport './Signup.css'\nimport bird from '../../assets/bird.svg'\n\nexport default function Signup({setmyName,setroute}) {\n    return (\n        <div className='signup'>\n            <img src={bird} alt=\"\" />\n            <div className='signup_form'>                \n                <div className='signup_title'>\n                    Enter Here !\n                </div>\n                <div className='signup_input'>\n                    <span>Nickname</span>\n                    <span><input type=\"text\" name='name' onInput={(e)=>setmyName(e.target.value)}/></span>\n                </div>\n                <div>\n                    <button onClick={()=>setroute('home')}>Enter</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n","import { useState } from 'react';\nimport './App.css';\nimport Home from './components/Home/Home'\nimport Signup from './components/Signup/Signup'\n\nfunction App() {\n  const [route, setroute] = useState('signup')\n  const [myName, setmyName] = useState('Anonymous')\n\n  const routing = (key) => {\n    switch (key) {\n      case 'home':\n        return <Home myName={myName} setroute={setroute}/>\n      case 'signup':\n        return <Signup setmyName={setmyName} setroute={setroute}/>\n      default:\n        return <h2 style={{textAlign:'center'}}>Error 404 : Page Not Found</h2>\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      {routing(route)}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}